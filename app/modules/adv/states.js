define(["angularAMD","Session","./module"],function(angularAMD,Session,module){"use strict";module.config(["$stateProvider","$starSessionProvider","$futureStateProvider",function($stateProvider,$starSessionProvider,$futureStateProvider,$scope){function loadCtrl($q,deps){var d=$q.defer();return require(deps,function(){d.resolve()}),d.promise}function setStates(objs){angular.forEach(objs,function(obj){void 0!==stateFactory["site."+obj.name]&&($stateProvider.state(stateFactory["site."+obj.name]),void 0!==obj.modules&&obj.modules.length>0&&setStates(obj.modules),void 0!==obj.controllers&&obj.controllers.length>0&&setStates(obj.controllers))})}var session=$starSessionProvider.getSession(),stateFactory={"site.adv":{name:"site.adv",url:"/adv",views:{leftnav:{templateUrl:"public/layout/leftnav.html",controller:"LeftnavCtrl"},topnav:{templateUrl:"public/layout/topnav.html",controller:"TopnavCtrl"}},data:{authorizedRoles:[session.userRole]}},"site.adv.home":{name:"site.adv.home",url:"/home",views:{"content@site":{templateUrl:"modules/adv/home/home.html",controller:"AdvHomeCtrl"}},resolve:{loadCtrl:function($q){return loadCtrl($q,["modules/adv/home/home.js"])}}}};setStates(session.systems)}])});