define(["angularAMD","Session"],function(angularAMD,Session){"use strict";angularAMD.config(["$stateProvider","$starSessionProvider","$futureStateProvider",function($stateProvider,$starSessionProvider,$futureStateProvider,$scope){function loadCtrl($q,deps){var d=$q.defer();return require(deps,function(){d.resolve()}),d.promise}function setStates(objs){angular.forEach(objs,function(obj){if("undefined"!=typeof stateFactory["site."+obj.name]){var _state=stateFactory["site."+obj.name];"undefined"!=typeof obj.methods&&obj.methods.length>0&&angular.forEach(obj.methods,function(_m){"undefined"==typeof _state.data&&(_state.data={}),"undefined"==typeof _state.data.methods&&(_state.data.methods={}),_state.data.methods[_m.name]=_m}),$stateProvider.state(_state),"undefined"!=typeof obj.modules&&obj.modules.length>0&&setStates(obj.modules),"undefined"!=typeof obj.controllers&&obj.controllers.length>0&&setStates(obj.controllers)}})}var session=$starSessionProvider.getSession(),stateFactory={"site.lsms":{name:"site.lsms",url:"/lsms",views:{topnav:{templateUrl:"public/layout/topnav.html",controller:"TopnavCtrl"},leftnav:{templateUrl:"public/layout/leftnav.html",controller:"LeftnavCtrl"}},data:{authorizedRoles:[session.userRole]}},"site.lsms.sources":{name:"site.lsms.sources",url:"/sources"},"site.lsms.sources.source":{name:"site.lsms.sources.source",url:"/source",views:{"content@site":{templateUrl:"modules/lsms/sources/source.html",controller:"SourceManageCtrl"}},resolve:{loadCtrl:function($q){return loadCtrl($q,["modules/lsms/sources/source","modules/lsms/sources/sourceEdit","modules/lsms/sources/showVideo","modules/lsms/sources/sourceVideo"])}}}};setStates(session.systems)}])});