<div class="alert alert-info"><h4>发送通知</h4></div><div class="clearfix" style="margin-bottom: 20px"></div><div class="panel-body" ng-show="loading_list"><div us-spinner="{radius:30,width:10,length:20}" style="height: 190px" class="test"></div></div><div class="col-md-12" ng-show="showId!=''&&!loading_list"><div class="col-md-4" ng-show="message==1 && flagI==1"><label>IOS</label><div class="alert alert-warning">发送状态：{{typeStatus[status_I]}}&nbsp; | &nbsp; 发送人数：{{num_I}}人 &nbsp; |&nbsp; 成功发送人数：{{sucess_I}}人&nbsp; |&nbsp;</div></div><div class="col-md-4" ng-show="message==1&& flagA==1"><label>Android</label><div class="alert alert-warning">发送状态：{{typeStatus[status_A]}}&nbsp; | &nbsp; 发送人数：{{num_A}}人 &nbsp; |&nbsp; 成功发送人数：{{sucess_A}}人 &nbsp; |&nbsp;</div></div><div class="col-md-5" ng-if="message==2"><label>异常</label><div class="alert alert-warning">提示信息：{{errorMessage}}</div></div></div><div class="clearfix" style="margin-bottom: 20px"></div><form class="form-horizontal" name="myform" id="myform" role="form" novalidate ng-show="!loading_list"><div class="form-group has-feedback" ng-class="{true:'has-error'}[ submitted && myform.title.$invalid ]"><label class="col-md-2 control-label" for="title">标题</label><div class="col-md-10"><input type="text" ng-model="news.title" class="form-control" name="title" id="title" placeholder="请输入通知标题" required ng-maxlength="20"> <small class="text-danger" ng-show="myform.title.$error.required && (myform.title.$dirty || submitted)">请输入通知标题</small> <small class="text-danger" ng-show="myform.title.$error.maxlength">标题最多只能输入20个字符</small> <small class="text-success" ng-show="myform.title.$valid"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group"><label class="col-md-2 control-label">图片</label><div class="col-md-10"><select-image ng-model="news.msgPic" id="msgPic" img="news.msgPic" name="msgPic"></select-image></div></div><div class="form-group has-feedback" ng-class="{true:'has-error'}[ submitted && myform.abstract.$invalid ]"><label class="col-md-2 control-label" for="abstract">摘要</label><div class="col-md-10"><textarea class="form-control" name="abstract" ng-model="news.abstract" rows="4" id="abstract" placeholder="请输入通知摘要" required ng-maxlength="40"></textarea><small class="text-danger" ng-show="myform.abstract.$error.required && (myform.abstract.$dirty || submitted)">请输入通知摘要</small> <small class="text-danger" ng-show="myform.abstract.$error.maxlength">摘要最多只能输入40个字符</small> <small class="text-success" ng-show="myform.abstract.$valid"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group"><label class="col-md-2 control-label">应用类型</label><div class="col-md-10"><label class="radio-inline" ng-repeat="typeName in appTypeName"><input type="radio" name="typeName" ng-init="pushMessageCtrl.chooseAppType(0)" ng-checked="{true:'true'}[$index==0 || typeName.appKeyId == appKeyId]" ng-click="pushMessageCtrl.chooseAppType($index)">{{ typeName.appKeyName }}</label></div></div><div class="form-group" ng-class="{true:'has-error'}[ submitted && deviceCount==0 ]"><label class="col-md-2 control-label">目标设备</label><div class="col-md-10"><label class="checkbox-inline"><input type="checkbox" name="device" class="android_device" ng-model="android" value="1" ng-click="ckMore(1,android)">Android</label><label class="checkbox-inline"><input type="checkbox" name="device" class="ios_device" ng-model="ios" value="2" ng-click="ckMore(2,ios)">IOS</label><small class="text-danger" ng-show="deviceCount==0 && (myform.device.$dirty || submitted)">( 请至少选择一种目标设备！）</small> <small class="text-success" ng-show="myform.device.$valid&&deviceCount!=0"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group has-feedback" ng-class="{true:'has-error'}[ submitted && myform.appVersion.$invalid ]"><label class="col-md-2 control-label">应用版本</label><div class="col-md-10"><input type="text" class="form-control" ng-model="appVersion" name="appVersion" required readonly="readonly" ng-click="pushMessageCtrl.chooseVersion(0)"> <small class="text-danger" ng-show="myform.appVersion.$error.required && (myform.appVersion.$dirty || submitted)">请选择版本</small> <small class="text-success" ng-show="myform.appVersion.$valid"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group"><label class="col-md-2 control-label" for="pushway">推送通道</label><div class="col-md-10"><label class="radio-inline"><input type="radio" name="ios" id="pushway" value="1" checked="checked">个推</label></div></div><div class="form-group" ng-class="{true:'has-error'}[ submitted && myform.addType.$invalid ]"><label class="col-md-2 control-label" for="addType">内容类型</label><div class="col-md-4"><select name="addType" id="addType" ng-model="news.addType" ng-change="pushMessageCtrl.checkAddType()" class="form-control" required><option value="">请选择</option><option value="1">频道</option><option value="2">下载</option><option value="3">链接</option><option value="4">栏目</option><option value="5">自定义</option></select><small class="text-danger" ng-show="myform.addType.$error.required && (myform.addData.$dirty || submitted)">请选择内容类型</small></div><div class="col-md-2"><input type="text" ng-if="news.addType==5" class="form-control" ng-model="tmpData.addTmpKey" name="addKey" placeholder="请输入自定义key" required> <small class="text-danger" ng-show="myform.addKey.$error.required && (myform.addKey.$dirty || submitted)">自定义key不能为空</small></div><div class="col-md-1"><small class="text-success" ng-show="(news.addType==5)?(myform.addType.$valid&&myform.addKey.$valid):myform.addType.$valid"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group has-feedback" ng-class="{true:'has-error'}[ submitted && myform.addData.$invalid ]"><label class="col-md-2 control-label">内容</label><div class="col-md-10"><input type="text" ng-if="news.addType==null" ng-click="pushMessageCtrl.changeChannel()" class="form-control" ng-model="addTmpData" name="addData" placeholder="请输入透传内容" ng-maxlength="400" required readonly="readonly"> <input type="text" ng-if="news.addType==1" ng-click="pushMessageCtrl.changeChannel()" class="form-control" ng-model="addTmpData" name="addData" placeholder="请输入频道信息" ng-maxlength="400" required readonly="readonly"> <input type="text" ng-if="news.addType==2" class="form-control" ng-model="tmpData.addTmpData" name="addData" placeholder="请输入下载链接" ng-maxlength="400" required> <input type="text" ng-if="news.addType==3" class="form-control" ng-model="tmpData.addTmpData" name="addData" placeholder="请输入链接地址" ng-maxlength="400" required> <input type="text" ng-if="news.addType==4" ng-click="pushMessageCtrl.changeChannel()" class="form-control" ng-model="addTmpData" name="addData" placeholder="请输入栏目信息" ng-maxlength="400" required readonly="readonly"> <input type="text" ng-if="news.addType==5" class="form-control" ng-model="tmpData.addTmpData" name="addData" placeholder="请输入自定义信息" ng-maxlength="400" required><!--<input type="text" ng-if="news.addType==5" ng-click="pushMessageCtrl.changeChannel()" class="form-control" ng-model="addTmpData" name="addData" placeholder="请输入点播信息" ng-maxlength="400" required readonly>--> <small class="text-danger" ng-show="myform.addData.$error.required && (myform.addData.$dirty || submitted)">请输入透传内容</small> <small class="text-danger" ng-show="myform.addData.$error.maxlength">内容最多只能输入400个字符</small> <small class="text-success" ng-show="myform.addData.$valid"><span class="glyphicon glyphicon-ok form-control-feedback"></span></small></div></div><div class="form-group"><label class="col-md-2 control-label" for="range">推送范围</label><div class="col-md-10"><div class="radio" style="margin-bottom: 10px"><label><input type="radio" ng-model="range" name="news.receiverGid" id="range" value="1" ng-checked="true"> 全部用户(未打开客户端的用户)</label></div></div></div><div class="form-group"><label class="col-md-2 control-label" for="area">选择地域</label><div class="col-md-10"><input type="text" class="form-control" id="area" ng-model="news.area" readonly="readonly" ng-focus="pushMessageCtrl.chooseArea(0)"></div></div><div class="form-group"><label class="col-md-2 control-label">是否立刻发送</label><div class="col-md-10"><label class="radio-inline"><input type="radio" ng-model="sends" name="sends" value="0">是</label><label class="radio-inline"><input type="radio" ng-model="sends" name="sends" value="1" ng-checked="true">否</label></div></div><div class="form-group" ng-hide="sends==0" ng-class="{true:'has-error'}[ submitted && myform.sendTime.$invalid ]"><label class="col-md-2 control-label">发送时间</label><div class="col-md-3"><input type="text" class="form-control" ng-model="sendTime" name="sendTime" placeholder="请选择日期" data-date-format="yyyy-MM-dd" data-autoclose="1" bs-datepicker> <small class="text-danger" ng-show="myform.sendTime.$invalid ">日期有误，请重新输入</small></div><div class="col-md-2"><input type="text" class="form-control" ng-model="sendTime" placeholder="请选择时间" data-time-format="HH:mm:ss" name="sendTime_time" data-autoclose="1" bs-timepicker> <small class="text-danger" ng-show="myform.sendTime_time.$invalid ">时间有误，请重新输入</small></div></div><div class="form-group"><label class="col-md-2 control-label">定速推送</label><div class="col-md-2"><label class="radio-inline"><input type="radio" ng-model="speed" name="speed" value="0" ng-checked="true">否</label><label class="radio-inline"><input type="radio" ng-model="speed" name="speed" value="1">是</label></div><div class="col-md-2" ng-if="speed==1"><input class="form-control" type="number" data-type="int" name="speed_time" ng-model="speed_time" id="speed_time" value="" max="5000" min="1" required> <small class="text-danger" ng-show="myform.$error.max || myform.$error.min || myform.$error.number ||myform.speed_time.$error.required && (myform.speed_time.$dirty || submitted)">请输入1~5000的整数</small></div><div class="col-md-1 control-label" style="text-align:left" ng-show="speed==1">条/秒</div></div><div class="form-group" ng-class="{true:'has-error'}[ submitted && myform.houseTime.$invalid ]"><label class="col-md-2 control-label">消息有效期</label><div class="col-md-10"><div class="col-md-1"><input type="number" class="form-control" name="houseTime" ng-model="houseTime" placeholder="时" max="72" min="1" required> <small class="text-danger" ng-show="myform.houseTime.$error.max || myform.houseTime.$error.min ">请输入1~72之间的数字</small></div><div class="col-md-1"><label class="control-label" style="font-weight:normal">小时</label></div><div class="col-md-1"><input type="number" class="form-control" name="minuteTime" ng-model="minuteTime" placeholder="分" max="60" min="0"> <small class="text-danger" ng-show="myform.minuteTime.$error.max || myform.minuteTime.$error.min ">请输入0~60之间的数字</small></div><div class="col-md-1"><label class="control-label" style="font-weight:normal">分钟</label></div><div class="col-md-1"><input type="number" class="form-control" name="secondTime" ng-model="secondTime" placeholder="秒" max="60" min="0"> <small class="text-danger" ng-show="myform.secondTime.$error.max || myform.secondTime.$error.min ">请输入0~60之间的数字</small></div><div class="col-md-1"><label class="control-label" style="font-weight:normal">秒</label></div></div></div><div class="form-group"><div class="col-md-6 text-center"><a class="btn btn-primary" ng-click="pushMessageCtrl.checkCloseDialog()" ng-disabled="submitStatus">确定</a></div><div class="col-md-6 text-center"><a class="btn btn-primary" ng-click="pushMessageCtrl.goList()">取消</a></div></div></form>