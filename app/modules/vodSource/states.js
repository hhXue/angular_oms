define(["angularAMD","Session"],function(angularAMD,Session){"use strict";angularAMD.config(["$stateProvider","$starSessionProvider","$futureStateProvider",function($stateProvider,$starSessionProvider,$futureStateProvider,$scope){function loadCtrl($q,deps){var d=$q.defer();return require(deps,function(){d.resolve()}),d.promise}function setStates(objs){angular.forEach(objs,function(obj){if("undefined"!=typeof stateFactory["site."+obj.name]){var _state=stateFactory["site."+obj.name];"undefined"!=typeof obj.methods&&obj.methods.length>0&&angular.forEach(obj.methods,function(_m){"undefined"==typeof _state.data&&(_state.data={}),"undefined"==typeof _state.data.methods&&(_state.data.methods={}),_state.data.methods[_m.name]=_m}),$stateProvider.state(_state),"undefined"!=typeof obj.modules&&obj.modules.length>0&&setStates(obj.modules),"undefined"!=typeof obj.controllers&&obj.controllers.length>0&&setStates(obj.controllers)}})}var session=$starSessionProvider.getSession(),stateFactory={"site.vodSource":{name:"site.vodSource",url:"/vodSource",views:{topnav:{templateUrl:"public/layout/topnav.html",controller:"TopnavCtrl"},leftnav:{templateUrl:"public/layout/leftnav.html",controller:"LeftnavCtrl"}},data:{authorizedRoles:[session.userRole]}},"site.vodSource.managment":{name:"site.vodSource.managment",url:"/managment"},"site.vodSource.managment.transcode":{name:"site.vodSource.managment.transcode",url:"/transCode",views:{"content@site":{templateUrl:"modules/vodSource/transcode/transCode.html",controller:"TransCodeCtrl"}},resolve:{loadCtrl:function($q){return loadCtrl($q,["modules/vodSource/transcode/transCode","modules/vodSource/transcode/showVideo"])}}}};setStates(session.systems)}])});